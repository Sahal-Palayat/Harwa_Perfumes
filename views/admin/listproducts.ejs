<%- include ('header')%>
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Products List</h2>
                    <p>Product Management.</p>
                </div>
                <div>
                    
                
                    <a href="/addproduct" class="btn btn-primary btn-sm rounded">Create new</a>
                </div>
            </div>
            <div class="card mb-4">
                <!-- card-header end// -->
                <!-- <div class="card-body"> -->
                    <!-- <article class="itemlist"> -->
                        <table>
                            <thead>
                                <tr>
                                    
                                    <th>Sl.No</th>
                                    <th>Product Images</th>
                                    <th>Product Name</th>
                                    <th>Price</th>
                                    <th>Brand</th>
                                    <th>Stock</th>
                                    <th>Category</th>
                                    <th>Status</th>
                                    <th>Edit</th>
                                </tr>

                            </thead>
                            <tbody>
                                <% if(products.length>0){  %>
                                    <% for(let i=0;i<products.length;i++){%>
                                        <tr>
                                            
                                            <td><%-i+1%></td>
                                            <td><img src="<%-products[i].coverimage%>" style="width: 50px; height: 40px;" alt=""> </td>
                                            <td><%- products[i].name%></td>
                                                        <td><%- products[i].price%></td>
                                            <td><%- products[i].brand%></td>
                                            <td><%- products[i].quantity  %></td>
                                            <td><%-products[i].category%></td>
                                            
                                            <td>
                                                    <li>
                                                      <%  if(products[i].status===true){  %>
                                                        <a href="/listproducts/block?id=<%= products[i]._id %>">
                                                       
                                                        <span style="color: rgb(39, 125, 95);">Listed</span>  </a> 
                                                       <% }else{ %>
                                                        <a href="/listproducts/unblock?id=<%=products[i]._id %>">
                                                        
                                                        <span style="color: rgb(172, 14, 14);">Unlisted</span></a>
                                                    </li>
                                                    <% }%>
    
                                            </td>
                                            
                                            <td>
                                                <div class="col-lg-2 col-sm-2 col-4 col-action text-end">
                                                    <a href="/editproduct?id=<%- products[i]._id%>" class="btn btn-sm font-sm rounded btn-brand">
                                                        Edit
                                                    </a>
                                                    
                                                </div>
                                            </td>
                                        </tr>

                                   <% }%>
                                <%}%>
                               
                            </tbody>
                        </table>
               
            </div>
            <div class="pagination" style="margin-left: 30px;margin-bottom: 20px;">
                <% if (currentPage > 1) { %>
                  <a href="?page=<%= currentPage - 1 %>"  >Previous</a>
                <% } %>
                
                Page <%= currentPage %> of <%= totalPages %>
                
                <% if (currentPage < totalPages) { %>
                  <a href="?page=<%= currentPage + 1 %>">Next</a>
                <% } %>
            </div> 
            <!-- <div class="pagination-area mt-30 mb-50">
                <nav aria-label="Page navigation example">
                    <ul class="pagination justify-content-start">
                        <li class="page-item active"><a class="page-link" href="#">01</a></li>
                        <li class="page-item"><a class="page-link" href="#">02</a></li>
                        <li class="page-item"><a class="page-link" href="#">03</a></li>
                        <li class="page-item"><a class="page-link dot" href="#">...</a></li>
                        <li class="page-item"><a class="page-link" href="#">16</a></li>
                        <li class="page-item"><a class="page-link" href="#"><i class="material-icons md-chevron_right"></i></a></li>
                    </ul>
                </nav>
            </div> -->
        </section> <!-- content-main end// -->
        
    </main>
    <script src="admin/assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="admin/assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="admin/assets/js/vendors/select2.min.js"></script>
    <script src="admin/assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="admin/assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="admin/assets/js/main.js" type="text/javascript"></script>
    <script>

       
        function searchProducts() {
          
          const currentPage = document.getElementById('currentPage').value; // Use the currentPage variable from your controller
      
          // Redirect to the same route with the search query and current page
          window.location.href = `/admin/products?page=${currentPage}`
        }
      </script>

    <%- include ('footer') %>